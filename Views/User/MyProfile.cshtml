@{
    ViewData["Title"] = "My Profile";
}

<link rel="stylesheet" href="~/css/home.css" />

<h1>My Profile</h1>
<p>Welcome to your profile, @User.Identity?.Name!</p>

<div class="profile-container">
    <h2>Personal Information</h2>
    <form>
        <div class="input-group">
            <label for="first-name">First Name</label>
            <input type="text" id="first-name" name="first-name" value="John" aria-label="First Name" />
        </div>
        <div class="input-group">
            <label for="last-name">Last Name</label>
            <input type="text" id="last-name" name="last-name" value="Doe" aria-label="Last Name" />
        </div>
        <div class="input-group">
            <label for="address">Address</label>
            <input type="text" id="address" name="address" value="555 Seymour St" aria-label="Address" />
        </div>
        <div class="input-group">
            <label for="apartment">Apartment, Suite (Optional)</label>
            <input type="text" id="apartment" name="apartment" value="" aria-label="Apartment or Suite" />
        </div>
        <div class="input-group">
            <label for="city">City</label>
            <input type="text" id="city" name="city" value="Vancouver" aria-label="City" />
        </div>
        <div class="input-group">
            <label for="province">Province</label>
            <input type="text" id="province" name="province" value="BC" aria-label="Province" />
        </div>
        <div class="input-group">
            <label for="postal-code">Postal Code</label>
            <input type="text" id="postal-code" name="postal-code" value="V6B 3H6" aria-label="Postal Code" />
        </div>
        <div class="input-group">
            <label for="phone">Phone (Optional)</label>
            <input type="text" id="phone" name="phone" value="" aria-label="Phone" />
        </div>
        <button type="button" class="btn">Edit | Save</button>
    </form>

    <h2>Account Information</h2>
    <form>
        <div class="input-group">
            <label for="email">Email Address</label>
            <input type="email" id="email" name="email" value="email@janesfakedomain.net" aria-label="Email Address" />
        </div>
        <button type="button" class="btn">Change Password</button>
    </form>

    <a href="#" class="view-orders">View Orders</a>
</div>

<script src="https://code.jquery.com/jquery-3.6.0.min.js"></script>
<script>
    $(document).ready(function () {
        $('input').prop('disabled', true); // Disable inputs while loading
        $.ajax({
            url: '/User/GetUser',
            method: 'GET',
            success: function (data) {
                $('#first-name').val(data.firstName);
                $('#last-name').val(data.lastName);
                $('#address').val(data.address);
                $('#apartment').val(data.apartment);
                $('#city').val(data.city);
                $('#province').val(data.province);
                $('#postal-code').val(data.postalCode);
                $('#phone').val(data.phone);
                $('#email').val(data.email);
                $('input').prop('disabled', false); // Enable inputs
            },
            error: function (xhr, status, error) {
                console.error('Error fetching user data:', error);
                alert('Error fetching user data.');
                $('input').prop('disabled', false); // Enable inputs
            }
        });
    });
</script>
